{{toc}}

!! Named Test Suite (pp.592)

!!! 前書き
''恣意的なテストのグループがあるとき、どうやってテストを実行したらいいの?''

'''グループとして実行させたいテストの集合を含んだ、適切な名前のテストスイートを定義します。'''

https://cacoo.com/diagrams/2iXo4LSsCvd7qDFQ

!! How It Works (pp.592)

* 無数のテストがある
** 系統だった方法で組織化したい
* テストスイート
** お互いによく似た機能を持つテストをグループにできる
* こんなふうにテストを実行できるようにしたい
** アプリケーションまたはコンポーネントに対するすべてのテストを実行
** 機能単位で実行
** サブコンポーネント単位で実行
** 部分的に実行
* Named Test Suite
** 定義されたサブセットから実行したいテストの選択を可能にする

!! When to Use It (pp.593)

* Intent-Revealing Name による特別な ''Test Suite Factory'' を定義する
** 関連したテストからなる一緒に実行したいそれぞれのグループに適用する
** [[担当割当表/PARTIII/Test Enumeration]](pp.399)を参照

* Factory Method によるテストスイートの生成
** 目的の Test Suite Object を生成

!!! Variation: AllTests Suite (pp.593)

* 一見矛盾した要求
** コマンド 1 つで全てのテストを実行したい
** サブセットだけ実行したい

* 一番の問題は実行時間
** 特別なコンテキストのための AllTests Suite を実行するのがベスト

* 次のような場合は Subset Suite を使う
** 使っている xUnit がテストセレクションをサポートしていない
** 実行したいテストが複数のコンテキストにばらついている
** あるコンテキストには実行したくないテストが含まれている

!!! Variation: Subset Suite (pp.593)

* 開発者はスローテスト (pp.253) を実行したがらない
** データベースにアクセスするコンポーネントを exercise するテスト
** メモリアクセスだけのテストに比べて必然的に遅くなる
* 名前から簡単に選択できるようにする
** データベースにアクセスするテストの Named Test Suite を定義
** メモリアクセスだけのテストの Named Test Suite を定義

* テストを実行しない別の動機
** テストの実行に必要なコンテキストが利用できないこと
** 例: Web サーバを必要とするコンポーネントのテストを実行したくない
*** 開発 PC で Web サーバが動いてない
*** Web サーバにデプロイする時間がすごくかかる
** 失敗することは分かってる and グリーンバーを維持するチャンスを失ってしまう

!!! Variation: Single Test Suite (pp.593)

!! Implementation Notes (pp.594)

!! Refactoring Notes (pp.594)

!!! Examples: AllTests Suite (pp.594)

	public clas AllTests {
	    public static Test suite() {
	        TestSuite suite = new TestSuite("Test for allJunitTests");
	        //$JUnit-BEGIN$
	        suite.addTestSuite(
	            com.clrstream.camug.example.test.InvoiceTest.class);
	        suite.addTest(com.clrstream.ex7.test.AllTests.suite());
	        suite.addTest(com.clrstream.ex8.test.AllTests.suite());
	        suite.addTestSuite(
	            com.xunitpatterns.guardassertion.Example.class);
	        //$JUnit-END$
	        return suite;
	    }
	}


!!! Example: Special-Purpose Suite (pp.595)

* All tests
* All database tests
* All in-memory tests


!!! Example: Single Test Suite (pp.596)

	public class LostTests extends TestCase {
	    public LostTests(String name) {
	        super(name);
	    }
	    
	    public void xtestOne() throws Exception {
	        fail("test not implemented");
	    }
	    /*
	    public void testTow() throws Exception {
	        fail("test not implemented");
	    }
	    */
	    public void testSeventeen() throws Exception {
	        assertTrue(true);
	    }
	}


	public class MyTest extends TestCase {
	    public static Test suite() {
	        return new LostTests("testSeventeen");
	    }
	}

!!! Example: Smoke Test Suite (pp.597)

	public class SmokeTestSuite extends TestCase {
	    public static Test suite() {
	        TestSuite mySuite = new TestSuite("Smoke Tests");
	
	        mySuite.addTest( new LostTests("testSeventeen") );
	        mySuite.addTest( new SampleTests("testOne") );
	        mySuite.addTest( new FlightManagementFacadeTest(
	           "testGetFlightsByOriginAirports_TwoOutboundFlights"));
	        // add additional tests here as needed...
	        return mySuite;
	    }
	}
